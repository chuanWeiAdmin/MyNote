# Nacos



## 一.单机版部署Nacos

```dockerfile
docker run --env MODE=standalone --name nacos -d -p 8848:8848 nacos/nacos-server
```



## 二 .单机+mysql部署

### 1 先将已经运行过的nacos容器中的配置文件弄出来

```dockerfile
docker container cp nacos:/home/nacos/conf .
```

- 解释: 将名叫 nacos 的容器中将 xxx 路径下的文件复制到当前路径下



### 2 修改其中的 application.properties  文件

```properties
spring.datasource.platform=mysql
 
db.num=1
db.url.0=jdbc:mysql://127.0.0.1:3306/nacos_config?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true
db.user=root
db.password=123456
```

- 解释 ：配置好数据库连接地址
- 可以配多个数据库成集群

### 3 运行 docker 命令

```dockerfile
docker run --name nacos-mysql \
-p 8868:8848 \
--privileged=true \
--restart=always \
-e JVM_XMS=256m \
-e JVM_XMX=256m \
-e MODE=standalone \
-e PREFER_HOST_MODE=hostname \
-v /root/nacos/logs:/home/nacos/logs \
-v /root/nacos/conf:/home/nacos/conf \
-d nacos/nacos-server
```

